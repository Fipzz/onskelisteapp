{%- capture productVars -%}
[
    {%- for product in collection.products -%}
    {
        "productID": {{ product.id }},
        "variantID": {%- if product.available -%}{{ product.selected_or_first_available_variant.id }}{%- else -%}null{%- endif -%}
    }{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
]
{%- endcapture -%}
    
    {% comment %} {%- unless forloop.last -%}{%- endunless -%} {% endcomment %}
    {% comment %} "variantID": {%- if product.available -%}{{ product.selected_or_first_available_variant }}{%- else -%}"null"{%- endif -%} {% endcomment %}
<div class="wishlist-data" data-product-params='{{ productVars }}'></div>

{% schema %}
    {
        "name": "Collection buttons",
        "target": "section",
        "javascript": "app.collection.min.js",
        "templates": ["collection"]
    }
{% endschema %}